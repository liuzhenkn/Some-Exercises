<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>个人网站</title>
	<link rel="stylesheet" type="text/css" href="css.css">
</head>
<body onselectstart="return false;">
<div id="container">
	<div class="first-show section left" id="section1">
		<div class="guide">
			<img id="gif1" src="photo/plane.gif" height="204" width="272">
			<div class="color"></div>
			<p class="fonts" id="font1">欢迎来到我的个人主页，</p>
			<p class="fonts" id="font2">我是刘祯昆，一名前端程序员，</p>
			<p class="fonts" id="font3">在这里你将看到我的个人资料，</p>
			<p class="fonts" id="font4">您可以用键盘方向键切换页面，</p>
			<p class="fonts" id="font5">鼠标滚轮也可以哦！</p>
		</div>
	</div>
	<div class="wrap section left" id="wrap" id="section2">
		<!-- photo负责平移、旋转 -->
		<div class="photo photo_front" onclick="turn(this)" id="photo_{{index}}">
			<!-- photo负责翻转 -->
			<div class="photo-wrap">
				<div class="side side-front">
					<p class="image"><img src="photo/{{img}}" /></p>
					<p class="caption">{{caption}}</p>
				</div>
				<div class="side side-back">
					<p class="desc">{{desc}}</p>
				</div>
			</div>
		</div>
	</div>
	<div class="descrip section left" id="section3">
		<div class="box">
			<div class="link link-miss">
				<span class="icon"></span>
				<a  class="button button0" data="点击查看我的个人简介" onclick="shows0()">
					<span class="line line-top"></span>
					<span class="line line-right"></span>
					<span class="line line-bottom"></span>
					<span class="line line-left"></span>
					个人简介
				</a>
			</div>
			<div class="link link-play">
				<span class="icon"></span>
				<a class="button button1" data="点击查看我的能力展示" onclick="shows1()">
					<span class="line line-top"></span>
					<span class="line line-right"></span>
					<span class="line line-bottom"></span>
					<span class="line line-left"></span>
					能力展示
				</a>
			</div>
			<div class="link link-touch">
				<span class="icon"></span>
				<a class="button button2" data="点击查看我的未来期望" onclick="shows2()">
					<span class="line line-top"></span>
					<span class="line line-right"></span>
					<span class="line line-bottom"></span>
					<span class="line line-left"></span>
					未来期望
				</a>
			</div>
			<div class="tip tip0">
				<em></em>
				<span></span>
			</div>
			<div class="tip tip1">
				<em></em>
				<span></span>
			</div>
			<div class="tip tip2">
				<em></em>
				<span></span>
			</div>
		</div>
		<ul class="introduces">
			<li class="introduce" id="int0">
				<p>姓名:刘祯昆</p>
				<p>专业年级:2013级计算机科学与技术</p>
				<p>毕业学校:中国海洋大学</p>
				<p>社团:爱特工作室</p>
				<p>方向:前端开发</p>
			</li>
			<li class="introduce" id="int1">
				<p>Photoshop:80%</p>
				<p>HTML+CSS:90%</p>
				<p>Jquery:80%</p>
				<p>Javascript:60%</p>
				<p>CSS3:60%</p>
				<p>bootstrap:60%</p>
				<p>掌握C、C++等编程语言</p>
			</li>
			<li class="introduce" id="int2">
				<p>近期目标:通读Javascript权威指南三遍，熟练掌握Javascript；了解一门后台语言；做好手里的项目。</p>
				<p>未来目标:成为一名优秀的前端工程师</p>		
			</li>
		</ul>
		<img id="gif2" src="photo/car.gif" height="154" width="234">
		<a  class="aside" onmouseover="show_connect()" onmouseout="hide_connect()">
			<p>QQ:314339793</p>
			<div class="qq"></div>
			<p>电话:314339793</p>
			<div class="phone"></div>
		</a>
	</div>
</div>
	<script type="text/javascript" src="photo/data.js"></script>
	<script type="text/javascript" src="jquery-1.11.2.min.js"></script>
	<script type="text/javascript" src="JavaScript.js"></script>
	<script type="text/javascript">
		//section1文字动画
		$(document).ready(function(){
			$('#font1').fadeIn(2000,function(){
				$('#font2').fadeIn(1600,function(){
					$('#font3').fadeIn(1200,function(){
						$('#font4').fadeIn(800,function(){
							$('#font5').fadeIn(400);
						})
					})
				});
			});
			function sport1(){
				$('#gif1').animate({left:'-270px'},9000,function(){
					if ($('#gif1').css("left")=="-270px") {
						//alert("结束");
						$('#gif1').css("left","1300px");
						sport1();
					};
				});
			};
			function sport2(){
				$('#gif2').animate({left:'-270px'},9000,function(){
					if ($('#gif2').css("left")=="-270px") {
						//alert("结束");
						$('#gif2').css("left","1300px");
						sport2();
					};
				});
			};
			sport1();
			sport2();
		});
		//3.通用函数
		function g(selector) {
			var method = selector.substr(0,1) == '.' ? 'getElementsByClassName' : 'getElementById';
			return document[method](selector.substr(1));
		}

		function random(range) {
			var max = Math.max(range[0], range[1]);
			var min = Math.min(range[0], range[1]);

			var diff = max-min;
			var number = Math.ceil(Math.random()*diff + min);
			return number;
		}
		//4.输出所有图片数据
		var data = data;
		function addPhotos() {
			var template = g('#wrap').innerHTML;
			var html = [];
			var nav = [];

			//7.输出控制按钮，每个按钮对应一张图片
			for(s in data) {
				var _html = template.replace('{{index}}', s).replace('{{img}}', data[s].img).replace('{{caption}}', data[s].caption).replace('{{desc}}', data[s].desc);
				html.push(_html);

				nav.push('<span class="i" id="nav_'+s+'" onclick="turn(g(\'#photo_'+s+'\'))">&nbsp;</span>');
			}
			html.push('<div class="nav">'+nav.join('')+'</div>');
			g('#wrap').innerHTML = html.join('');

			rsort(random([0, data.length]));
		}
		addPhotos();

		//6.计算左右分区的取值范围
		function range() {
			var range = {left:{x:[], y:[]}, right:{x:[], y:[]}};

			var wrap = {
				w: g('#wrap').clientWidth,
				h: g('#wrap').clientHeight
			};

			var photo = {
				w: g('.photo')[0].clientWidth,
				h: g('.photo')[0].clientHeight
			};

			range.left.x = [0-photo.w/2, wrap.w/2-photo.w/2];
			range.left.y = [0-photo.h/2, wrap.h];

			range.right.x = [wrap.w/2+photo.w/2, wrap.w+photo.w];
			range.right.y = range.left.y;

			return range;

		}

		//5.图片排序
		function rsort(n) {
			var _photo = g('.photo');
			var photos = [];
			for(var s=0; s<_photo.length; s++) {
				_photo[s].className = _photo[s].className.replace(/\s*photo_center\s*/, ' ');
				_photo[s].className = _photo[s].className.replace(/\s*photo_front\s*/, ' ');
				_photo[s].className = _photo[s].className.replace(/\s*photo_back\s*/, ' ');


				_photo[s].className += ' photo_front '
				_photo[s].style.left = '';
				_photo[s].style.top = '';
				_photo[s].style['transform'] = _photo[s].style['-webkit-transform'] = 'rotate(360deg) scale(1.3)';
				photos.push(_photo[s]);
			}

			//设置中间图片的样式
			var photo_center = g('#photo_'+n);
			photo_center.className += ' photo_center ';
			photo_center = photos.splice(n, 1)[0];

			//把图片切分成左右两部分区域
			var photos_left = photos.splice(0, Math.ceil(photos.length/2));
			var photos_right = photos;

			var ranges = range();
			for(s in photos_left) {
				var photo = photos_left[s];

				//将图片随机分布在左区域
				photo.style.left = random(ranges.left.x)+ 'px';
				photo.style.top = random(ranges.left.y)+ 'px';

				//给图片一个随机的倾斜角度
				photo.style['transform'] = photo.style['-webkit-transform'] = 'rotate('+random([-120, 120])+'deg) scale(1)';
			}
			for(s in photos_right) {
				var photo = photos_right[s];

				//将图片随机分布在右区域
				photo.style.left = random(ranges.right.x)+ 'px';
				photo.style.top = random(ranges.right.y)+ 'px';

				//给图片一个随机的倾斜角度
				photo.style['transform'] = photo.style['-webkit-transform'] = 'rotate('+random([-120, 120])+'deg)';
			}
			//控制按钮处理
			var navs = g('.i');
			for (var s = 0; s<navs.length; s++) {
				navs[s].className = navs[s].className.replace(/\s*i_current\s*/, ' ');
				navs[s].className = navs[s].className.replace(/\s*i_back\s*/, ' ');
			}
			g('#nav_'+n).className += ' i_current ';

			//console.log(photos.length);
		}

		//1.控制翻转
		function turn(elem) {
			var cls = elem.className;
			var n = elem.id.split('_')[1];

			//判断当前要翻转的图片是不是在中间显示
			if(!/photo_center/.test(cls)) {
				return rsort(n);
			}

			if(/photo_front/.test(cls)) {
				cls = cls.replace(/photo_front/, 'photo_back');
				g('#nav_'+n).className += ' i_back ';
			} else {
				cls = cls.replace(/photo_back/, 'photo_front');
				g('#nav_'+n).className = g('#nav_'+n).className.replace(/\s*i_back\s*/, ' ');
			}
			return elem.className = cls;
		}
		$(function(){
			$("#container").switchPage({
				'loop' : true,
				'keyboard' : true,
				'direction' : 'horizontal'
			});
		});
		//section3下拉动画
		function shows0(){
			$('#int0').slideToggle();
		}
		function shows1(){
			$('#int1').slideToggle();
		}
		function shows2(){
			$('#int2').slideToggle();
		}
		function show_connect(){
			$('.aside').stop().animate({left:'0'},800);
		}
		function hide_connect(){
			$('.aside').stop().animate({left:'-150px'},800);
		}
	</script>
</body>
</html>